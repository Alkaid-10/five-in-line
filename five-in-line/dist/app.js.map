{"version":3,"sources":["../js/app.jsx"],"names":["wrap","document","getElementById","login","getElementsByClassName","value","getElementsByTagName","socket","focus","onkeydown","e","event","keyCode","style","display","io","emit","ReactDOM","render","Reset","props","onClick","Unit","OnlinePlayer","arr","key","online","push","map","index","hasOwnProperty","role","userName","Turn","result","turn","Board","React","Component","constructor","state","Array","fill","isBlacksTurn","point","urBlack","componentWillMount","that","on","msg","setState","console","log","user","componentDidMount","styleArray","styleArr","slice","place","alert","handle","n","num","i","reset","componentDidUpdate","calculateWinner","board","r","target","line","upSide","leftUp","rightUp","Math","min","floor","leftSide","rightSide","downSide","leftDown","rightDown"],"mappings":"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","file":"app.js","sourcesContent":["var wrap=document.getElementById('wrap');\r\nvar login=document.getElementsByClassName('login')[0];\r\nvar value=login.getElementsByTagName('input')[0];\r\nvar socket;\r\nvalue.focus();\r\nvalue.onkeydown = function(e){\r\ne = e || event;\r\nif (e.keyCode === 13 && this.value) {\r\n    login.style.display='none';\r\n    wrap.style.display='block';\r\n    socket=io();\r\n    socket.emit('login',{'userName':this.value});\r\n    ReactDOM.render(<Board />,\r\n    document.getElementById('wrap'))\r\n}\r\n}\r\n//刷新按钮\r\nfunction Reset(props){\r\n   return(\r\n      <button onClick={() => props.onClick()} className='reset'>\r\n         重新开局\r\n      </button>\r\n   )\r\n}\r\nfunction Unit(props){\r\n   return(\r\n      <div className={props.style} onClick={() => props.onClick()}></div>\r\n   )\r\n}\r\n//在线人数\r\nfunction OnlinePlayer(props){\r\n  var arr=[];\r\n  for(var key in props.online){\r\n     arr.push(props.online[key]);\r\n  }\r\n   return(\r\n         <div className='online'> \r\n              {arr.map(function(value,index){\r\n                  \r\n                    if(value.hasOwnProperty('role') && value.role){\r\n                         return <div key={index} className='clearfix'>\r\n                                    \r\n                                    <Unit style='unit unit-b' />\r\n                                    <div className='fl'>{value.userName}</div>\r\n                                </div>\r\n                    }else if(value.hasOwnProperty('role') && !value.role){\r\n                         return  <div key={index} className='clearfix'>\r\n                                    \r\n                                    <Unit style='unit unit-w' />\r\n                                    <div className='fl'>{value.userName}</div>\r\n                                </div>\r\n                    }else{\r\n                         return  <p key={index}>{value.userName} ：在观战</p>\r\n                    }\r\n              })\r\n           }\r\n        </div>\r\n    )\r\n}\r\n//玩家切换\r\nfunction Turn(props){\r\n    var result;\r\n    if(props.turn){\r\n        result=<div className='turn'><strong>BLACK</strong></div>\r\n    }else{\r\n        result=<div className='turn'><strong>WHITE</strong></div>\r\n    }\r\n    return(\r\n       result\r\n    )\r\n}\r\n//主棋盘\r\nclass Board extends React.Component{\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      'styleArr': Array(225).fill('unit'),\r\n      isBlacksTurn:true,\r\n      point:-1,\r\n      urBlack:null,\r\n      online:{}\r\n    };\r\n  }\r\n  componentWillMount() {\r\n    var that = this;\r\n    socket.on('role', function(msg){\r\n        if(msg.hasOwnProperty('role') && msg.role){\r\n             that.setState({urBlack: true,})\r\n             console.log('你是黑旗')\r\n        }else if(msg.hasOwnProperty('role') && !msg.role){\r\n            that.setState({urBlack: false,})\r\n            console.log('你是bai旗')\r\n        }else{\r\n             console.log('人满了，不好意思')\r\n        }\r\n    })\r\n     socket.on('online', function(user){\r\n         that.setState({online: user,});\r\n    })\r\n  }\r\n  componentDidMount() {\r\n    var that = this;\r\n     socket.on('chat message', function(msg){\r\n      //更新视图\r\n      var styleArray = that.state.styleArr.slice();\r\n      styleArray[msg.place] = that.state.isBlacksTurn ? 'unit unit-b' : 'unit unit-w';\r\n      that.setState({\r\n        'styleArr':styleArray,\r\n         isBlacksTurn: !that.state.isBlacksTurn,\r\n         point:msg.place,\r\n         })\r\n    });\r\n    socket.on('reset',function(msg){\r\n        console.log('reset')\r\n        var styleArray = that.state.styleArr.slice();\r\n        styleArray.fill('unit')\r\n        that.setState({\r\n          'styleArr':styleArray,\r\n           point:-1,\r\n           });\r\n        ReactDOM.render(<div></div>,document.getElementById('gameover'));\r\n        if(msg.turn){\r\n          alert(\"it's black's turn\")\r\n        }else{\r\n          alert(\"it's white's turn\")\r\n        }\r\n    })\r\n  }\r\n  handle(n){\r\n\r\n      //刚落子的加个css3特效\r\n      //\r\n      //\r\n      //\r\n      var num=0;\r\n      for(var i in this.state.online){\r\n            num++;\r\n      }\r\n      if(num<2){\r\n        alert('请等待partner')\r\n        return \r\n      }\r\n      //判断该谁落子\r\n      if(this.state.isBlacksTurn==this.state.urBlack){\r\n          if(this.state.styleArr[n]!='unit'){//如果落子的地方有子了，就骂他\r\n            alert('那有棋子了，你傻叉啊');\r\n            return;\r\n        }\r\n        socket.emit('chat message',{'place':n,'player':this.state.isBlacksTurn})\r\n      }else{\r\n          alert('不该你走呢亲')\r\n      }\r\n      \r\n  }\r\n  reset(){\r\n     socket.emit('reset',{\"turn\":this.state.isBlacksTurn})  \r\n  }\r\n  componentDidUpdate(){\r\n  // 更新的时候触发\r\n       if(calculateWinner(this.state.styleArr,this.state.point)){\r\n            if(this.state.isBlacksTurn!=this.state.urBlack&&this.state.urBlack!=null){\r\n                   ReactDOM.render(<img src='img/victory.png' className='victory' />,\r\n                   document.getElementById('gameover'));\r\n            }else{\r\n                   ReactDOM.render(<img src='img/defeat.png' className='victory' />,\r\n                    document.getElementById('gameover'));\r\n            }\r\n           \r\n\r\n      }\r\n  }\r\n  render(){\r\n\r\n      var board=[];\r\n      for(var r=0;r<15;r++){\r\n        for(var i=0;i<15;i++){\r\n          board[r*15+i]=<Unit key={[r,i]} style={this.state.styleArr[r*15+i]} onClick={() => this.handle(r*15+i)}/>\r\n        }\r\n      }\r\n      return(\r\n        <div>\r\n          <OnlinePlayer online={this.state.online} />\r\n          {board}\r\n          <Turn turn={this.state.isBlacksTurn}/>\r\n          <Reset onClick={() => this.reset()} />\r\n          <div id='gameover'></div>\r\n        </div>              \r\n      )\r\n    }\r\n}\r\n\r\nfunction calculateWinner(arr,num) {\r\n    var target=arr[num];\r\n    var line=1;\r\n    var upSide,leftUp,rightUp;    \r\n    upSide=leftUp=rightUp=Math.min(Math.floor(num/15),5);\r\n    //横向判断先向左后向右\r\n    var leftSide=Math.min(num%15,5);\r\n    var rightSide=Math.min(14-num%15,5);\r\n    //console.log('rightSide',rightSide)\r\n    for(var i=num-1;i>num-leftSide-1;i--){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n           break;\r\n        }\r\n    }\r\n    for(var i=num+1;i<=num+rightSide;i++){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    if(line==5){\r\n        return true;\r\n    }else{\r\n        line=1;\r\n    }\r\n    //竖向判断 先上后下\r\n    for(var i=num-15;i>=num-upSide*15;i=i-15){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    var downSide=15-upSide\r\n    for(var i=num+15;i<=num+downSide*15;i=i+15){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    if(line==5){\r\n       return true;\r\n    }else{\r\n        line=1;\r\n    }\r\n    //   斜向判断  酱紫/斜   先上后下\r\n    \r\n    rightUp=Math.min(rightUp,rightSide)//判断太靠右边了，就被右边界隔断\r\n    for(var i=num-14;i>=num-rightUp*14;i=i-14){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    var leftDown,rightDown;\r\n    rightDown=leftDown=14-Math.floor(num/15);\r\n    leftDown=Math.min(leftDown,leftSide);//判断太靠左边了，就被左边界隔断\r\n    for(var i=num+14;i<=num+leftDown*14;i=i+14){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    if(line==5){\r\n       return true;\r\n    }else{\r\n        line=1;\r\n    }\r\n    //   斜向判断   酱紫\\斜   先上后下\r\n    rightUp=Math.min(rightUp,leftSide)\r\n    for(var i=num-16;i>=num-rightUp*16;i=i-16){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }    \r\n    }\r\n    rightDown=Math.min(rightDown,rightSide)\r\n    for(var i=num+16;i<=num+rightDown*16;i=i+16){\r\n        if(arr[i]==target){\r\n            line++;\r\n        }else{\r\n            break;\r\n        }\r\n    }\r\n    if(line==5){\r\n       return true;\r\n    }else{\r\n        line=1;\r\n    }\r\n\r\n    return false;\r\n}"]}